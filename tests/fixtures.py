import os

import pytest

from exchange_data.utils import roundup_to_nearest


class TestUtils(object):
    def test_roundup_to_nearest_ten(self):
        result = roundup_to_nearest(1.0, 10.0)

        assert result == 10.0

    def test_roundup_to_nearest_twenty(self):
        result = roundup_to_nearest(1.0, 20.0)

        assert result == 20.0


def datafile_name(name):
    path = f'./data/{name}.json'
    dir = os.path.join(os.path.dirname(__file__))
    path = os.path.join(dir, path)
    return path


@pytest.fixture('module')
def measurements():
    data = [{'time': 1528681218618, 'data': '{"table": "orderBookL2", '
                                            '"action": "update", "data": [{'
                                            '"id": 8799327400, "side": "Buy", '
                                            '"size": 132658}, {"id": '
                                            '8799327650, "side": "Buy", '
                                            '"size": 19475}], "symbol": '
                                            '"XBTUSD", "timestamp": '
                                            '"2018-06-11 01:40:18.614585Z"}',
             'symbol': 'XBTUSD'},
            {'time': 1528681243802,
             'data': '{"table": "orderBookL2", '
                     '"action": '
                     '"update", "data": [{"id": 8799298050, '
                     '"side": "Sell", "size": 1200}, {"id": '
                     '8799310150, "side": "Sell", "size": 3041}, '
                     '{"id": 8799318900, "side": "Sell", "size": '
                     '78161}, {"id": 8799324300, "side": "Sell", '
                     '"size": 385505}, {"id": 8799333250, "side": '
                     '"Buy", "size": 1850}, {"id": 8799334050, '
                     '"side": "Buy", "size": 76580}, {"id": '
                     '8799342800, "side": "Buy", "size": 16218}, '
                     '{"id": 8799354900, "side": "Buy", "size": '
                     '48134}, {"id": 8799370400, "side": "Buy", '
                     '"size": 153600}], "symbol": "XBTUSD", '
                     '"timestamp": "2018-06-11 '
                     '01:40:43.799837Z"}',
             'symbol': 'XBTUSD'}]

    return {'data': data}


@pytest.fixture('module')
def instruments():
    return [{"symbol": "XBTZ14", "timestamp": "2014-11-21T21:00:02.409Z",
             "tickSize": 0.01},
            {"symbol": "XBTF15", "timestamp": "2014-11-21T21:00:02.409Z",
             "tickSize": 0.01},
            {"symbol": "XBTZ14_F15", "timestamp": "2014-11-21T21:00:02.409Z",
             "tickSize": 0.01},
            {"symbol": "XBTH15", "timestamp": "2014-11-21T21:00:02.409Z",
             "tickSize": 0.01},
            {"symbol": "XBTF15_H15", "timestamp": "2014-11-21T21:00:02.409Z",
             "tickSize": 0.01},
            {"symbol": "XBUZ14", "timestamp": "2014-12-08T11:04:41.555Z",
             "tickSize": 0.01},
            {"symbol": "XBUH15", "timestamp": "2014-12-08T11:04:58.190Z",
             "tickSize": 0.01},
            {"symbol": "XBUZ14_H15", "timestamp": "2014-12-08T11:04:58.190Z",
             "tickSize": 0.01},
            {"symbol": "XBUM15", "timestamp": "2015-06-26T12:00:00.000Z",
             "tickSize": 0.01},
            {"symbol": "XBUZ14_M15", "timestamp": "2014-12-08T11:05:12.181Z",
             "tickSize": 0.01},
            {"symbol": "XBUH15_M15", "timestamp": "2014-12-08T11:05:12.181Z",
             "tickSize": 0.01},
            {"symbol": "XBTZ14_H15", "timestamp": "2014-12-08T11:08:33.780Z",
             "tickSize": 0.01},
            {"symbol": "XBTG15", "timestamp": "2014-12-19T02:20:35.050Z",
             "tickSize": 0.01},
            {"symbol": "XBTF15_G15", "timestamp": "2014-12-19T02:20:35.050Z",
             "tickSize": 0.01},
            {"symbol": "XBTH15_G15", "timestamp": "2014-12-19T02:20:35.050Z",
             "tickSize": 0.01},
            {"symbol": "XBUU15", "timestamp": "2015-09-25T12:00:00.000Z",
             "tickSize": 0.01},
            {"symbol": "XBUH15_U15", "timestamp": "2014-12-19T02:40:24.331Z",
             "tickSize": 0.01},
            {"symbol": "XBUM15_U15", "timestamp": "2015-06-25T04:05:25.667Z",
             "tickSize": 0.01},
            {"symbol": "BVOLG15", "timestamp": "2015-01-05T11:36:32.649Z",
             "tickSize": 0.01},
            {"symbol": ".XBT", "timestamp": "2018-06-23T02:58:30.000Z",
             "tickSize": 0.01},
            {"symbol": ".BVOL", "timestamp": "2018-06-22T12:00:00.000Z",
             "tickSize": 0.01},
            {"symbol": ".XBT30M", "timestamp": "2018-06-22T12:00:00.000Z",
             "tickSize": 0.01},
            {"symbol": "XBU24H", "timestamp": "2015-09-23T12:00:00.000Z",
             "tickSize": 0.01},
            {"symbol": "BVOLH15", "timestamp": "2015-02-23T09:16:19.460Z",
             "tickSize": 0.01},
            {"symbol": "XBUJ15", "timestamp": "2015-03-23T11:57:34.561Z",
             "tickSize": 0.01},
            {"symbol": "BVOLJ15", "timestamp": "2015-03-23T12:00:01.331Z",
             "tickSize": 0.01},
            {"symbol": "XBTJ15", "timestamp": "2015-03-23T12:02:40.400Z",
             "tickSize": 0.01},
            {"symbol": "XBTK15", "timestamp": "2015-05-29T12:00:00.000Z",
             "tickSize": 0.01},
            {"symbol": "XBUK15", "timestamp": "2015-05-29T12:00:00.000Z",
             "tickSize": 0.01},
            {"symbol": "XBTM15", "timestamp": "2015-06-26T12:00:00.000Z",
             "tickSize": 0.01},
            {"symbol": "XBTK15_M15", "timestamp": "2015-05-13T17:09:28.003Z",
             "tickSize": 0.01},
            {"symbol": ".XBT_5M", "timestamp": "2017-02-21T06:55:00.000Z",
             "tickSize": 0.01},
            {"symbol": ".XBT2H", "timestamp": "2017-04-04T12:00:00.000Z",
             "tickSize": 0.01},
            {"symbol": ".BVOL24H", "timestamp": "2018-06-23T02:20:00.000Z",
             "tickSize": 0.01},
            {"symbol": "BVOL24H", "timestamp": "2015-09-18T12:00:00.000Z",
             "tickSize": 0.01},
            {"symbol": ".BVOL7D", "timestamp": "2018-06-23T02:55:00.000Z",
             "tickSize": 0.01},
            {"symbol": "BVOL7D", "timestamp": "2015-09-25T12:00:00.000Z",
             "tickSize": 0.01},
            {"symbol": "XBUZ15", "timestamp": "2015-12-25T12:00:00.000Z",
             "tickSize": 0.01},
            {"symbol": "XBUU15_Z15", "timestamp": "2015-08-25T04:29:39.669Z",
             "tickSize": 0.01},
            {"symbol": "XBTU15", "timestamp": "2015-09-25T12:00:00.000Z",
             "tickSize": 0.01},
            {"symbol": "XBTM15_U15", "timestamp": "2015-05-29T03:12:52.561Z",
             "tickSize": 0.01},
            {"symbol": "XBTZ15", "timestamp": "2015-12-25T12:00:00.000Z",
             "tickSize": 0.01},
            {"symbol": "XBTM15_Z15", "timestamp": "2015-05-29T03:13:17.351Z",
             "tickSize": 0.01},
            {"symbol": "XBTU15_Z15", "timestamp": "2015-08-28T23:19:24.687Z",
             "tickSize": 0.01},
            {"symbol": "XBTN15", "timestamp": "2015-07-31T12:00:00.000Z",
             "tickSize": 0.01},
            {"symbol": "XBUN15", "timestamp": "2015-07-31T12:00:00.000Z",
             "tickSize": 0.01},
            {"symbol": "XBTQ15", "timestamp": "2015-08-28T12:00:00.000Z",
             "tickSize": 0.01},
            {"symbol": "XBUQ15", "timestamp": "2015-08-28T12:00:00.000Z",
             "tickSize": 0.01},
            {"symbol": ".LTC", "timestamp": "2016-09-06T12:05:15.251Z",
             "tickSize": 0.001},
            {"symbol": ".LTC2H", "timestamp": "2016-09-05T12:00:00.000Z",
             "tickSize": 0.001},
            {"symbol": "XLT7D", "timestamp": "2016-02-19T12:00:00.000Z",
             "tickSize": 0.001},
            {"symbol": "XBT7D", "timestamp": "2016-05-13T12:00:00.000Z",
             "tickSize": 0.01},
            {"symbol": ".ETHXBT", "timestamp": "2018-06-23T02:58:31.000Z",
             "tickSize": 0.00001},
            {"symbol": ".ETHXBT2H", "timestamp": "2016-11-04T12:00:00.000Z",
             "tickSize": 0.00001},
            {"symbol": "ETH7D", "timestamp": "2017-03-24T12:00:00.000Z",
             "tickSize": 0.00001},
            {"symbol": "XBTH16", "timestamp": "2016-03-25T12:00:00.000Z",
             "tickSize": 0.01},
            {"symbol": "XBTV15", "timestamp": "2015-10-30T12:00:00.000Z",
             "tickSize": 0.01},
            {"symbol": "XBUV15", "timestamp": "2015-09-21T02:19:43.217Z",
             "tickSize": 0.01},
            {"symbol": "XBT24H", "timestamp": "2016-05-13T12:00:00.000Z",
             "tickSize": 0.01},
            {"symbol": ".BVOL10M", "timestamp": "2018-05-29T13:22:00.000Z",
             "tickSize": 0.01},
            {"symbol": ".BVOL30M", "timestamp": "2018-05-29T13:22:00.000Z",
             "tickSize": 0.01},
            {"symbol": ".BVOL1H", "timestamp": "2018-05-29T13:22:00.000Z",
             "tickSize": 0.01},
            {"symbol": "XBTM16", "timestamp": "2016-06-24T12:00:00.000Z",
             "tickSize": 0.01},
            {"symbol": "XBU7D", "timestamp": "2016-05-13T12:00:00.000Z",
             "tickSize": 0.01},
            {"symbol": ".A50", "timestamp": "2016-08-30T07:30:00.000Z",
             "tickSize": 2.5},
            {"symbol": "A50G16", "timestamp": "2016-02-26T07:31:59.000Z",
             "tickSize": 2.5},
            {"symbol": "XBT48H", "timestamp": "2016-05-12T12:00:10.000Z",
             "tickSize": 0.01},
            {"symbol": "A50H16", "timestamp": "2016-03-30T07:30:00.000Z",
             "tickSize": 2.5},
            {"symbol": ".FCTXBT", "timestamp": "2017-07-25T20:07:30.000Z",
             "tickSize": 1e-7},
            {"symbol": ".FCTXBT2H", "timestamp": "2016-11-04T12:00:00.000Z",
             "tickSize": 1e-7},
            {"symbol": "FCT7D", "timestamp": "2017-04-28T12:00:00.000Z",
             "tickSize": 0.000001},
            {"symbol": "XBTU16", "timestamp": "2016-09-30T12:00:00.000Z",
             "tickSize": 0.01},
            {"symbol": "A50J16", "timestamp": "2016-04-28T07:34:48.000Z",
             "tickSize": 2.5},
            {"symbol": "A50K16", "timestamp": "2016-05-30T07:31:02.000Z",
             "tickSize": 2.5},
            {"symbol": ".XBTPON", "timestamp": "2016-11-04T12:04:00.000Z",
             "tickSize": 0.000001},
            {"symbol": ".XBTPON24H", "timestamp": "2016-11-04T12:00:00.000Z",
             "tickSize": 0.000001},
            {"symbol": ".ETHPON", "timestamp": "2016-11-04T12:04:00.000Z",
             "tickSize": 0.000001},
            {"symbol": ".ETHPON24H", "timestamp": "2016-11-04T12:00:00.000Z",
             "tickSize": 0.000001},
            {"symbol": "ETHXBT", "timestamp": "2016-11-04T12:00:00.000Z",
             "tickSize": 0.00001},
            {"symbol": ".LTCXBT", "timestamp": "2018-06-23T02:58:00.000Z",
             "tickSize": 0.00001},
            {"symbol": ".LTCXBT2H", "timestamp": "2016-11-04T12:00:00.000Z",
             "tickSize": 0.00001},
            {"symbol": ".LTCBON", "timestamp": "2016-11-04T12:04:00.000Z",
             "tickSize": 0.000001},
            {"symbol": ".LTCBON24H", "timestamp": "2016-11-04T12:00:00.000Z",
             "tickSize": 0.000001},
            {"symbol": ".XBTBON", "timestamp": "2018-06-19T15:42:00.000Z",
             "tickSize": 0.000001},
            {"symbol": ".XBTBON24H", "timestamp": "2016-11-04T12:00:00.000Z",
             "tickSize": 0.000001},
            {"symbol": "LTCXBT", "timestamp": "2016-11-04T12:00:00.000Z",
             "tickSize": 0.00001},
            {"symbol": ".USDBON", "timestamp": "2018-06-19T15:42:00.000Z",
             "tickSize": 0.000001},
            {"symbol": ".USDBON24H", "timestamp": "2016-11-04T12:00:00.000Z",
             "tickSize": 0.000001},
            {"symbol": "XBTUSD", "timestamp": "2018-06-23T02:58:38.094Z",
             "tickSize": 0.5},
            {"symbol": ".FCTPON", "timestamp": "2016-11-04T12:04:00.000Z",
             "tickSize": 0.000001},
            {"symbol": ".FCTPON24H", "timestamp": "2016-11-04T12:00:00.000Z",
             "tickSize": 0.000001},
            {"symbol": ".DAOETH", "timestamp": "2016-09-06T02:23:00.000Z",
             "tickSize": 0.00001},
            {"symbol": ".DAOETH2H", "timestamp": "2016-09-05T12:00:00.000Z",
             "tickSize": 0.00001},
            {"symbol": "FCTXBT", "timestamp": "2016-11-04T12:00:00.000Z",
             "tickSize": 0.000001},
            {"symbol": "DAOETH", "timestamp": "2016-06-24T12:00:00.000Z",
             "tickSize": 0.00001},
            {"symbol": ".LSKXBT", "timestamp": "2016-11-04T12:04:45.000Z",
             "tickSize": 1e-7},
            {"symbol": ".LSKPON", "timestamp": "2016-05-26T11:18:26.961Z",
             "tickSize": 0.000001},
            {"symbol": ".LSKPON24H", "timestamp": "2016-05-25T12:00:00.000Z",
             "tickSize": 0.000001},
            {"symbol": "LSKXBT", "timestamp": "2016-11-04T12:00:00.000Z",
             "tickSize": 0.000001},
            {"symbol": "A50M16", "timestamp": "2016-06-29T07:16:15.006Z",
             "tickSize": 2.5},
            {"symbol": ".XBTBON8H", "timestamp": "2018-06-19T12:00:00.000Z",
             "tickSize": 0.000001},
            {"symbol": ".USDBON8H", "timestamp": "2018-06-19T12:00:00.000Z",
             "tickSize": 0.000001},
            {"symbol": ".XBTUSDPI", "timestamp": "2018-06-23T02:58:00.000Z",
             "tickSize": 0.000001},
            {"symbol": ".XBTUSDPI8H", "timestamp": "2018-06-22T20:00:00.000Z",
             "tickSize": 0.000001},
            {"symbol": ".XBTJPY", "timestamp": "2018-06-23T02:58:25.000Z",
             "tickSize": 0.01},
            {"symbol": ".XBTJPY30M", "timestamp": "2018-06-22T12:00:00.000Z",
             "tickSize": 0.01},
            {"symbol": "XBJ24H", "timestamp": "2017-02-22T11:59:00.000Z",
             "tickSize": 1},
            {"symbol": ".XBTPON8H", "timestamp": "2016-11-04T12:00:00.000Z",
             "tickSize": 0.000001},
            {"symbol": ".ETHPON8H", "timestamp": "2016-11-04T12:00:00.000Z",
             "tickSize": 0.000001},
            {"symbol": ".LTCBON8H", "timestamp": "2016-11-04T12:00:00.000Z",
             "tickSize": 0.000001},
            {"symbol": ".FCTPON8H", "timestamp": "2016-11-04T12:00:00.000Z",
             "tickSize": 0.000001},
            {"symbol": ".LSKPON8H", "timestamp": "2016-06-20T13:57:02.737Z",
             "tickSize": 0.000001},
            {"symbol": ".ETHXBTPI", "timestamp": "2016-11-04T12:00:00.000Z",
             "tickSize": 0.000001},
            {"symbol": ".ETHXBTPI8H", "timestamp": "2016-11-04T12:00:00.000Z",
             "tickSize": 0.000001},
            {"symbol": ".LTCXBTPI", "timestamp": "2016-11-04T12:00:00.000Z",
             "tickSize": 0.000001},
            {"symbol": ".LTCXBTPI8H", "timestamp": "2016-11-04T12:00:00.000Z",
             "tickSize": 0.000001},
            {"symbol": ".FCTXBTPI", "timestamp": "2016-11-04T12:00:00.000Z",
             "tickSize": 0.000001},
            {"symbol": ".FCTXBTPI8H", "timestamp": "2016-11-04T12:00:00.000Z",
             "tickSize": 0.000001},
            {"symbol": ".LSKXBTPI", "timestamp": "2016-11-04T12:00:00.000Z",
             "tickSize": 0.000001},
            {"symbol": ".LSKXBTPI8H", "timestamp": "2016-11-04T12:00:00.000Z",
             "tickSize": 0.000001},
            {"symbol": "A50N16", "timestamp": "2016-07-28T07:30:00.000Z",
             "tickSize": 2.5},
            {"symbol": ".ETCXBT", "timestamp": "2018-06-23T02:57:45.000Z",
             "tickSize": 0.000001},
            {"symbol": ".ETCXBT30M", "timestamp": "2018-06-22T12:00:00.000Z",
             "tickSize": 0.000001},
            {"symbol": "ETC24H", "timestamp": "2016-07-29T12:00:00.000Z",
             "tickSize": 0.000001},
            {"symbol": "A50Q16", "timestamp": "2016-08-30T07:30:00.000Z",
             "tickSize": 2.5},
            {"symbol": "ETC7D", "timestamp": "2018-03-30T12:00:00.000Z",
             "tickSize": 0.000001},
            {"symbol": ".BFX", "timestamp": "2016-11-04T12:08:30.577Z",
             "tickSize": 0.0001},
            {"symbol": ".BFX30M", "timestamp": "2016-11-04T12:00:00.000Z",
             "tickSize": 0.0001},
            {"symbol": "BFXQ16", "timestamp": "2016-08-26T12:00:00.000Z",
             "tickSize": 0.0001},
            {"symbol": ".XMRXBT", "timestamp": "2018-06-23T02:57:45.000Z",
             "tickSize": 1e-7},
            {"symbol": ".XMRXBT30M", "timestamp": "2018-06-22T12:00:00.000Z",
             "tickSize": 1e-7},
            {"symbol": "XMR7D", "timestamp": "2017-03-24T12:00:00.000Z",
             "tickSize": 0.000001},
            {"symbol": "BFXU16", "timestamp": "2016-09-30T12:00:00.000Z",
             "tickSize": 0.0001},
            {"symbol": ".ZECXBT", "timestamp": "2018-06-23T02:57:45.000Z",
             "tickSize": 1e-7},
            {"symbol": ".ZECXBT30M", "timestamp": "2018-06-22T12:00:00.000Z",
             "tickSize": 1e-7},
            {"symbol": "ZECZ16", "timestamp": "2016-12-30T12:00:00.000Z",
             "tickSize": 0.000001},
            {"symbol": "BFXV16", "timestamp": "2016-10-28T12:00:00.000Z",
             "tickSize": 0.0001},
            {"symbol": "XBJ7D", "timestamp": "2016-12-16T12:00:00.000Z",
             "tickSize": 1},
            {"symbol": "XBJZ16", "timestamp": "2016-12-30T12:00:00.000Z",
             "tickSize": 1},
            {"symbol": ".XRPXBT", "timestamp": "2018-06-23T02:58:00.000Z",
             "tickSize": 1e-8},
            {"symbol": ".XRPXBT30M", "timestamp": "2018-06-22T12:00:00.000Z",
             "tickSize": 1e-8},
            {"symbol": ".REPXBT", "timestamp": "2017-07-25T20:07:30.000Z",
             "tickSize": 1e-7},
            {"symbol": ".REPXBT30M", "timestamp": "2017-07-25T12:00:00.000Z",
             "tickSize": 1e-7},
            {"symbol": "XRP7D", "timestamp": "2017-04-28T12:00:00.000Z",
             "tickSize": 1e-8},
            {"symbol": "REP7D", "timestamp": "2017-06-16T12:00:00.000Z",
             "tickSize": 0.000001},
            {"symbol": ".ETHXBT30M", "timestamp": "2018-06-22T12:00:00.000Z",
             "tickSize": 0.00001},
            {"symbol": ".FCTXBT30M", "timestamp": "2017-07-25T12:00:00.000Z",
             "tickSize": 1e-7},
            {"symbol": ".LTCXBT30M", "timestamp": "2018-06-22T12:00:00.000Z",
             "tickSize": 0.00001},
            {"symbol": ".LSKXBT30M", "timestamp": "2016-11-04T12:00:00.000Z",
             "tickSize": 1e-7},
            {"symbol": "XBTZ16", "timestamp": "2016-12-30T12:00:00.000Z",
             "tickSize": 0.01},
            {"symbol": "LTC7D", "timestamp": "2017-04-28T12:00:00.000Z",
             "tickSize": 0.00001},
            {"symbol": ".WINXBT", "timestamp": "2016-11-10T11:18:59.344Z",
             "tickSize": 1e-7},
            {"symbol": ".WINXBT30M", "timestamp": "2016-11-10T11:18:59.345Z",
             "tickSize": 1e-7},
            {"symbol": ".XBTCNY", "timestamp": "2017-09-27T04:53:25.000Z",
             "tickSize": 0.01},
            {"symbol": ".XBTCNY30M", "timestamp": "2017-09-26T12:00:00.000Z",
             "tickSize": 0.01},
            {"symbol": "XBCZ16", "timestamp": "2016-12-30T12:00:00.000Z",
             "tickSize": 0.1},
            {"symbol": "WINZ16", "timestamp": "2016-12-30T12:00:00.000Z",
             "tickSize": 0.000001},
            {"symbol": "XBTH17", "timestamp": "2017-03-31T12:00:00.000Z",
             "tickSize": 0.01},
            {"symbol": "XBCH17", "timestamp": "2017-03-31T12:00:00.000Z",
             "tickSize": 0.1},
            {"symbol": "ZECH17", "timestamp": "2017-03-31T12:00:00.000Z",
             "tickSize": 0.000001},
            {"symbol": ".DASHXBT", "timestamp": "2018-06-23T02:58:31.000Z",
             "tickSize": 1e-7},
            {"symbol": ".DASHXBT30M", "timestamp": "2018-06-22T12:00:00.000Z",
             "tickSize": 1e-7},
            {"symbol": ".BXBTJPY", "timestamp": "2018-06-23T02:58:30.000Z",
             "tickSize": 0.01},
            {"symbol": ".BXBTJPY30M", "timestamp": "2018-06-22T12:00:00.000Z",
             "tickSize": 0.01},
            {"symbol": "COIN_BH17", "timestamp": "2017-03-10T21:35:00.000Z",
             "tickSize": 0.01},
            {"symbol": "DASH7D", "timestamp": "2017-03-24T12:00:00.000Z",
             "tickSize": 0.000001},
            {"symbol": ".EVOL7D", "timestamp": "2018-06-23T02:40:00.000Z",
             "tickSize": 0.01},
            {"symbol": "XBJH17", "timestamp": "2017-03-31T12:00:00.000Z",
             "tickSize": 1},
            {"symbol": ".XBTBON2H", "timestamp": "2018-06-19T14:00:00.000Z",
             "tickSize": 0.000001},
            {"symbol": ".USDBON2H", "timestamp": "2018-06-19T14:00:00.000Z",
             "tickSize": 0.000001},
            {"symbol": ".XBTUSDPI2H", "timestamp": "2018-06-23T02:00:00.000Z",
             "tickSize": 0.000001},
            {"symbol": ".BXBT", "timestamp": "2018-06-23T02:58:30.000Z",
             "tickSize": 0.01},
            {"symbol": ".BXBT30M", "timestamp": "2018-06-22T12:00:00.000Z",
             "tickSize": 0.01},
            {"symbol": "XBTM17", "timestamp": "2017-06-30T12:00:00.000Z",
             "tickSize": 0.1},
            {"symbol": "XBCM17", "timestamp": "2017-06-30T12:00:00.000Z",
             "tickSize": 0.1},
            {"symbol": "XBJM17", "timestamp": "2017-06-30T12:00:00.000Z",
             "tickSize": 1},
            {"symbol": "ZECM17", "timestamp": "2017-06-30T12:00:00.000Z",
             "tickSize": 0.000001},
            {"symbol": "ETHJ17", "timestamp": "2017-04-28T12:00:00.000Z",
             "tickSize": 0.00001},
            {"symbol": "DASHJ17", "timestamp": "2017-04-28T12:00:00.000Z",
             "tickSize": 0.000001},
            {"symbol": "XMRJ17", "timestamp": "2017-04-28T12:00:00.000Z",
             "tickSize": 0.000001},
            {"symbol": "B_BLOCKSZ17", "timestamp": "2017-12-31T12:00:00.000Z",
             "tickSize": 0.01},
            {"symbol": "B_SEGWITZ17", "timestamp": "2017-09-08T12:00:00.000Z",
             "tickSize": 0.01},
            {"symbol": ".GNOXBT", "timestamp": "2017-07-25T20:07:30.000Z",
             "tickSize": 1e-7},
            {"symbol": ".GNOXBT30M", "timestamp": "2017-07-25T12:00:00.000Z",
             "tickSize": 1e-7},
            {"symbol": "GNOM17", "timestamp": "2017-06-30T12:00:00.000Z",
             "tickSize": 0.000001},
            {"symbol": "ETHM17", "timestamp": "2017-06-30T12:00:00.000Z",
             "tickSize": 0.00001},
            {"symbol": "DASHM17", "timestamp": "2017-06-30T12:00:00.000Z",
             "tickSize": 0.000001},
            {"symbol": "XMRM17", "timestamp": "2017-06-30T12:00:00.000Z",
             "tickSize": 0.000001},
            {"symbol": "LTCM17", "timestamp": "2017-06-30T12:00:00.000Z",
             "tickSize": 0.00001},
            {"symbol": "XRPM17", "timestamp": "2017-06-30T12:00:00.000Z",
             "tickSize": 1e-8},
            {"symbol": "FCTM17", "timestamp": "2017-06-30T12:00:00.000Z",
             "tickSize": 0.000001},
            {"symbol": ".QTUMXBT", "timestamp": "2017-11-07T16:40:11.310Z",
             "tickSize": 1e-7},
            {"symbol": ".QTUMXBT30M", "timestamp": "2017-11-07T12:00:00.000Z",
             "tickSize": 1e-7},
            {"symbol": ".STRXBT", "timestamp": "2017-11-07T19:24:00.000Z",
             "tickSize": 1e-8},
            {"symbol": ".STRXBT30M", "timestamp": "2017-11-07T12:00:00.000Z",
             "tickSize": 1e-8},
            {"symbol": "QTUMU17", "timestamp": "2017-09-29T12:00:00.000Z",
             "tickSize": 0.000001},
            {"symbol": ".BATXBT", "timestamp": "2017-06-05T10:30:16.909Z",
             "tickSize": 1e-8},
            {"symbol": ".BATXBT30M", "timestamp": "2017-06-05T10:30:16.909Z",
             "tickSize": 1e-8},
            {"symbol": ".SNTXBT", "timestamp": "2017-08-04T06:25:33.270Z",
             "tickSize": 1e-8},
            {"symbol": ".SNTXBT30M", "timestamp": "2017-08-03T12:00:00.000Z",
             "tickSize": 1e-8},
            {"symbol": ".B148", "timestamp": "2017-06-06T08:35:28.736Z",
             "tickSize": 0.01},
            {"symbol": ".B14830M", "timestamp": "2017-06-06T08:35:28.736Z",
             "tickSize": 0.01},
            {"symbol": "SNTN17", "timestamp": "2017-07-28T12:00:00.000Z",
             "tickSize": 1e-8},
            {"symbol": ".XTZXBT", "timestamp": "2017-06-16T02:50:36.439Z",
             "tickSize": 1e-7},
            {"symbol": ".XTZXBT30M", "timestamp": "2017-06-16T02:50:36.439Z",
             "tickSize": 1e-7},
            {"symbol": "XBTU17", "timestamp": "2017-09-29T12:00:00.000Z",
             "tickSize": 0.1},
            {"symbol": "XBJU17", "timestamp": "2017-09-29T12:00:00.000Z",
             "tickSize": 1},
            {"symbol": "ZECU17", "timestamp": "2017-09-29T12:00:00.000Z",
             "tickSize": 0.000001},
            {"symbol": "ETHU17", "timestamp": "2017-09-29T12:00:00.000Z",
             "tickSize": 0.00001},
            {"symbol": "DASHU17", "timestamp": "2017-09-29T12:00:00.000Z",
             "tickSize": 0.000001},
            {"symbol": "XMRU17", "timestamp": "2017-09-29T12:00:00.000Z",
             "tickSize": 0.000001},
            {"symbol": "LTCU17", "timestamp": "2017-09-29T12:00:00.000Z",
             "tickSize": 0.00001},
            {"symbol": "XRPU17", "timestamp": "2017-09-29T12:00:00.000Z",
             "tickSize": 1e-8},
            {"symbol": ".EOSXBT", "timestamp": "2018-06-23T02:58:31.001Z",
             "tickSize": 1e-7},
            {"symbol": ".EOSXBT30M", "timestamp": "2018-06-22T12:00:00.000Z",
             "tickSize": 1e-7},
            {"symbol": "XTZZ17", "timestamp": "2017-12-29T12:00:00.000Z",
             "tickSize": 0.000001},
            {"symbol": "EOSN17", "timestamp": "2017-07-28T12:00:00.000Z",
             "tickSize": 0.000001},
            {"symbol": ".PAYXBT", "timestamp": "2017-06-28T15:10:31.195Z",
             "tickSize": 1e-7},
            {"symbol": ".PAYXBT30M", "timestamp": "2017-06-28T15:10:31.195Z",
             "tickSize": 1e-7},
            {"symbol": ".ETHBON", "timestamp": "2018-06-23T02:58:00.000Z",
             "tickSize": 0.000001},
            {"symbol": ".ETHBON2H", "timestamp": "2018-06-23T02:00:00.000Z",
             "tickSize": 0.000001},
            {"symbol": ".ETHBON8H", "timestamp": "2018-06-22T20:00:00.000Z",
             "tickSize": 0.000001},
            {"symbol": ".ETHXBTPI2H", "timestamp": "2017-07-25T02:31:37.060Z",
             "tickSize": 0.000001},
            {"symbol": "ZECZ17", "timestamp": "2017-12-29T12:00:00.000Z",
             "tickSize": 0.000001},
            {"symbol": "ETHZ17", "timestamp": "2017-12-29T12:00:00.000Z",
             "tickSize": 0.00001},
            {"symbol": "DASHZ17", "timestamp": "2017-12-29T12:00:00.000Z",
             "tickSize": 0.000001},
            {"symbol": "XMRZ17", "timestamp": "2017-12-29T12:00:00.000Z",
             "tickSize": 0.000001},
            {"symbol": "LTCZ17", "timestamp": "2017-12-29T12:00:00.000Z",
             "tickSize": 0.00001},
            {"symbol": "XRPZ17", "timestamp": "2017-12-29T12:00:00.000Z",
             "tickSize": 1e-8},
            {"symbol": "XBTZ17", "timestamp": "2017-12-29T12:00:00.000Z",
             "tickSize": 0.5},
            {"symbol": "XBJZ17", "timestamp": "2017-12-29T12:00:00.000Z",
             "tickSize": 100},
            {"symbol": ".JPYBON", "timestamp": "2017-10-31T17:47:33.836Z",
             "tickSize": 0.000001},
            {"symbol": ".JPYBON2H", "timestamp": "2017-10-31T17:47:33.837Z",
             "tickSize": 0.000001},
            {"symbol": ".JPYBON8H", "timestamp": "2017-10-31T17:47:33.837Z",
             "tickSize": 0.000001},
            {"symbol": ".XBTJPYPI", "timestamp": "2017-10-31T17:47:33.837Z",
             "tickSize": 0.000001},
            {"symbol": ".XBTJPYPI2H", "timestamp": "2017-10-31T17:47:33.837Z",
             "tickSize": 0.000001},
            {"symbol": ".XBTJPYPI8H", "timestamp": "2017-10-31T17:47:33.837Z",
             "tickSize": 0.000001},
            {"symbol": ".BCHXBT", "timestamp": "2018-06-23T02:57:45.000Z",
             "tickSize": 0.00001},
            {"symbol": ".BCHXBT30M", "timestamp": "2018-06-22T12:00:00.000Z",
             "tickSize": 0.00001},
            {"symbol": "BCHX17", "timestamp": "2017-11-24T12:00:00.000Z",
             "tickSize": 0.0001},
            {"symbol": "BCHZ17", "timestamp": "2017-12-29T12:00:00.000Z",
             "tickSize": 0.0001},
            {"symbol": ".KRWBON", "timestamp": "2017-12-07T08:16:20.520Z",
             "tickSize": 0.000001},
            {"symbol": ".KRWBON2H", "timestamp": "2017-12-07T08:16:20.520Z",
             "tickSize": 0.000001},
            {"symbol": ".KRWBON8H", "timestamp": "2017-12-07T08:16:20.521Z",
             "tickSize": 0.000001},
            {"symbol": ".XBTKRWPI", "timestamp": "2017-12-07T08:16:20.521Z",
             "tickSize": 0.000001},
            {"symbol": ".XBTKRWPI2H", "timestamp": "2017-12-07T08:16:20.521Z",
             "tickSize": 0.000001},
            {"symbol": ".XBTKRWPI8H", "timestamp": "2017-12-07T08:16:20.521Z",
             "tickSize": 0.000001},
            {"symbol": ".XBTKRW", "timestamp": "2017-12-07T08:16:20.521Z",
             "tickSize": 1},
            {"symbol": ".XBTKRW30M", "timestamp": "2017-12-07T08:16:20.522Z",
             "tickSize": 1},
            {"symbol": "XBTH18", "timestamp": "2018-03-30T12:00:00.000Z",
             "tickSize": 0.5},
            {"symbol": "ZECH18", "timestamp": "2018-03-30T12:00:00.000Z",
             "tickSize": 0.000001},
            {"symbol": "ETHH18", "timestamp": "2018-03-30T12:00:00.000Z",
             "tickSize": 0.00001},
            {"symbol": "DASHH18", "timestamp": "2018-03-30T12:00:00.000Z",
             "tickSize": 0.000001},
            {"symbol": "XMRH18", "timestamp": "2018-03-30T12:00:00.000Z",
             "tickSize": 0.000001},
            {"symbol": "LTCH18", "timestamp": "2018-03-30T12:00:00.000Z",
             "tickSize": 0.00001},
            {"symbol": "XRPH18", "timestamp": "2018-03-30T12:00:00.000Z",
             "tickSize": 1e-8},
            {"symbol": "BCHF18", "timestamp": "2018-01-26T12:00:00.000Z",
             "tickSize": 0.0001},
            {"symbol": ".ADAXBT", "timestamp": "2018-06-23T02:58:13.907Z",
             "tickSize": 1e-8},
            {"symbol": ".ADAXBT30M", "timestamp": "2018-06-22T12:00:00.000Z",
             "tickSize": 1e-8},
            {"symbol": "XBTM18", "timestamp": "2018-06-23T02:58:37.290Z",
             "tickSize": 0.5},
            {"symbol": "ADAF18", "timestamp": "2018-01-26T12:00:00.000Z",
             "tickSize": 1e-8},
            {"symbol": ".XLMXBT", "timestamp": "2018-06-23T02:58:31.000Z",
             "tickSize": 1e-8},
            {"symbol": ".XLMXBT30M", "timestamp": "2018-06-22T12:00:00.000Z",
             "tickSize": 1e-8},
            {"symbol": ".NEOXBT", "timestamp": "2018-06-23T02:58:29.790Z",
             "tickSize": 1e-7},
            {"symbol": ".NEOXBT30M", "timestamp": "2018-06-22T12:00:00.000Z",
             "tickSize": 1e-7},
            {"symbol": "XLMF18", "timestamp": "2018-01-26T12:00:00.000Z",
             "tickSize": 1e-8},
            {"symbol": "BCHH18", "timestamp": "2018-03-30T12:00:00.000Z",
             "tickSize": 0.0001},
            {"symbol": "ADAH18", "timestamp": "2018-03-30T12:00:00.000Z",
             "tickSize": 1e-8},
            {"symbol": "XLMH18", "timestamp": "2018-03-30T12:00:00.000Z",
             "tickSize": 1e-8},
            {"symbol": "NEOG18", "timestamp": "2018-02-23T12:00:00.000Z",
             "tickSize": 0.000001},
            {"symbol": "NEOH18", "timestamp": "2018-03-30T12:00:00.000Z",
             "tickSize": 0.000001},
            {"symbol": "ADAM18", "timestamp": "2018-06-23T02:58:13.907Z",
             "tickSize": 1e-8},
            {"symbol": "BCHM18", "timestamp": "2018-06-23T02:58:31.000Z",
             "tickSize": 0.0001},
            {"symbol": "ETHM18", "timestamp": "2018-06-23T02:58:31.000Z",
             "tickSize": 0.00001},
            {"symbol": "LTCM18", "timestamp": "2018-06-23T02:58:31.000Z",
             "tickSize": 0.00001},
            {"symbol": "XRPM18", "timestamp": "2018-06-23T02:58:31.000Z",
             "tickSize": 1e-8},
            {"symbol": "XBTU18", "timestamp": "2018-06-23T02:58:30.000Z",
             "tickSize": 0.5},
            {"symbol": "XBT7D_U110", "timestamp": "2018-06-08T12:00:00.000Z",
             "tickSize": 0.00001},
            {"symbol": "XBT7D_D90", "timestamp": "2018-06-08T12:00:00.000Z",
             "tickSize": 0.00001},
            {"symbol": "EOSM18", "timestamp": "2018-06-23T02:58:35.117Z",
             "tickSize": 1e-7},
            {"symbol": "XBT7D_U105", "timestamp": "2018-06-23T02:58:30.000Z",
             "tickSize": 0.00001},
            {"symbol": "XBT7D_D95", "timestamp": "2018-06-23T02:58:30.000Z",
             "tickSize": 0.00001},
            {"symbol": "ETHU18", "timestamp": "2018-06-23T02:58:31.000Z",
             "tickSize": 0.00001},
            {"symbol": "LTCU18", "timestamp": "2018-06-23T02:58:31.000Z",
             "tickSize": 0.00001},
            {"symbol": "XRPU18", "timestamp": "2018-06-23T02:58:00.000Z",
             "tickSize": 1e-8},
            {"symbol": "BCHU18", "timestamp": "2018-06-23T02:57:45.000Z",
             "tickSize": 0.0001},
            {"symbol": "ADAU18", "timestamp": "2018-06-23T02:58:13.907Z",
             "tickSize": 1e-8},
            {"symbol": "EOSU18", "timestamp": "2018-06-23T02:58:31.001Z",
             "tickSize": 1e-7}]


@pytest.fixture('module')
def initial_orderbook_l2():
    return {
      'table': 'orderBookL2',
      'action': 'partial',
      'keys': ['symbol', 'id', 'side'],
      'types': {
        'symbol': 'symbol',
        'id': 'long',
        'side': 'symbol',
        'size': 'long',
        'price': 'float'
      },
      'foreignKeys': {
        'symbol': 'instrument',
        'side': 'side'
      },
      'attributes': {
        'symbol': 'grouped',
        'id': 'sorted'
      },
      'filter': {
        'symbol': 'XBTUSD'
      },
      'data': [{
        'symbol': 'XBTUSD',
        'id': 15500000000,
        'side': 'Sell',
        'size': 1,
        'price': 1000000
      }, {
        'symbol': 'XBTUSD',
        'id': 15500000100,
        'side': 'Sell',
        'size': 100000,
        'price': 999999
      }, {
        'symbol': 'XBTUSD',
        'id': 15504648350,
        'side': 'Sell',
        'size': 2191000,
        'price': 953516.5
      }, {
        'symbol': 'XBTUSD',
        'id': 15515440800,
        'side': 'Sell',
        'size': 300,
        'price': 845592
      }]
    }
